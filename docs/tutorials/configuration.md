# Configuration

The CloudWeGo API Gateway reads its configuration from environment variables. These environment variables allow you to customize the behavior of the API Gateway based on your specific needs. Here are the available environment variables:

## Environment Variables

### `$IDL_DIR`

- Description: The directory containing the Interface Definition Language (IDL) files.
- Usage: The IDL files define the structure of the request and response objects, as well as the service interface. The API Gateway uses these IDL files to understand the structure of the incoming requests and outgoing responses. Setting this variable ensures that the API Gateway knows where to find the IDL files for your services.

### `$ETCD_ADDR`

- Description: The address of the etcd server.
- Usage: etcd is used for service registration and discovery in the API Gateway. The API Gateway needs to know the address of the etcd server to perform these tasks. By setting this variable, you specify the etcd server's location, allowing the API Gateway to connect to it.

### `$LOG_LEVEL`

- Description: The log level for the API Gateway.
- Usage: Logging is essential for monitoring the API Gateway's behavior and diagnosing issues. By setting the log level, you control the verbosity of the logs generated by the API Gateway. You can choose from different log levels, such as "info," "warn," "error," or "debug," depending on the level of detail you need in your logs.

### `$LOG_PATH`

- Description: The path to the log file.
- Usage: By setting the log path, you specify where the API Gateway should write its log messages. Storing logs in a specific file allows you to manage and analyze the log data separately from other output.

### `$ALLOW_METRICS`

- Description: A flag to enable metrics.
- Usage: Metrics provide valuable insights into the performance and health of the API Gateway. By setting this flag to true, you enable the collection and reporting of various metrics, such as request latency, error rates, and throughput. These metrics can help you monitor the API Gateway's performance and identify potential bottlenecks or issues.

## Example Usage

### Running locally

To configure the API Gateway with these environment variables, you can set them when starting the API Gateway service.
Here's an example of how to start the API Gateway with custom configuration:

```bash
$ IDL_DIR="/path/to/idl_files"
$ ETCD_ADDR="localhost:2379"
$ LOG_LEVEL="debug"
$ LOG_PATH="/var/log/cloudwego-api-gateway.log"
$ ALLOW_METRICS=true

$ cwgo start
```

### Using Docker

Alternatively, if you prefer using docker-compose to manage your services, you can set the environment variables directly in your docker-compose.yml file.
Here's how you can do it:

```yaml
version: "3.9" # Docker version
services:
  # ...
  http-server:
    image: czsheng/cloudwego-api-gateway
    volumes:
      - ../../tests/hello/idl/:/etc/idl
    environment:
      IDL_DIR: /path/to/idl_files
      ETCD_ADDR: http://etcd:2379
      LOG_LEVEL: debug
      LOG_PATH: /var/log/cloudwego-api-gateway.log
      ALLOW_METRICS: "true"
    ports:
      - "8080:8080"
    depends_on:
      - etcd
  # ...
```
